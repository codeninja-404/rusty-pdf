{"version":3,"file":"index.js","sources":["../src/wasm/rusty_pdf.js","../src/index.jsx"],"sourcesContent":["let wasm;\n\nfunction addToExternrefTable0(obj) {\n    const idx = wasm.__externref_table_alloc();\n    wasm.__wbindgen_externrefs.set(idx, obj);\n    return idx;\n}\n\nconst CLOSURE_DTORS = (typeof FinalizationRegistry === 'undefined')\n    ? { register: () => {}, unregister: () => {} }\n    : new FinalizationRegistry(state => state.dtor(state.a, state.b));\n\nfunction getArrayU8FromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return getUint8ArrayMemory0().subarray(ptr / 1, ptr / 1 + len);\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return decodeText(ptr, len);\n}\n\nlet cachedUint8ArrayMemory0 = null;\nfunction getUint8ArrayMemory0() {\n    if (cachedUint8ArrayMemory0 === null || cachedUint8ArrayMemory0.byteLength === 0) {\n        cachedUint8ArrayMemory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachedUint8ArrayMemory0;\n}\n\nfunction handleError(f, args) {\n    try {\n        return f.apply(this, args);\n    } catch (e) {\n        const idx = addToExternrefTable0(e);\n        wasm.__wbindgen_exn_store(idx);\n    }\n}\n\nfunction isLikeNone(x) {\n    return x === undefined || x === null;\n}\n\nfunction makeMutClosure(arg0, arg1, dtor, f) {\n    const state = { a: arg0, b: arg1, cnt: 1, dtor };\n    const real = (...args) => {\n\n        // First up with a closure we increment the internal reference\n        // count. This ensures that the Rust closure environment won't\n        // be deallocated while we're invoking it.\n        state.cnt++;\n        const a = state.a;\n        state.a = 0;\n        try {\n            return f(a, state.b, ...args);\n        } finally {\n            state.a = a;\n            real._wbg_cb_unref();\n        }\n    };\n    real._wbg_cb_unref = () => {\n        if (--state.cnt === 0) {\n            state.dtor(state.a, state.b);\n            state.a = 0;\n            CLOSURE_DTORS.unregister(state);\n        }\n    };\n    CLOSURE_DTORS.register(real, state, state);\n    return real;\n}\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n    if (realloc === undefined) {\n        const buf = cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length, 1) >>> 0;\n        getUint8ArrayMemory0().subarray(ptr, ptr + buf.length).set(buf);\n        WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n\n    let len = arg.length;\n    let ptr = malloc(len, 1) >>> 0;\n\n    const mem = getUint8ArrayMemory0();\n\n    let offset = 0;\n\n    for (; offset < len; offset++) {\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7F) break;\n        mem[ptr + offset] = code;\n    }\n    if (offset !== len) {\n        if (offset !== 0) {\n            arg = arg.slice(offset);\n        }\n        ptr = realloc(ptr, len, len = offset + arg.length * 3, 1) >>> 0;\n        const view = getUint8ArrayMemory0().subarray(ptr + offset, ptr + len);\n        const ret = cachedTextEncoder.encodeInto(arg, view);\n\n        offset += ret.written;\n        ptr = realloc(ptr, len, offset, 1) >>> 0;\n    }\n\n    WASM_VECTOR_LEN = offset;\n    return ptr;\n}\n\nfunction takeFromExternrefTable0(idx) {\n    const value = wasm.__wbindgen_externrefs.get(idx);\n    wasm.__externref_table_dealloc(idx);\n    return value;\n}\n\nlet cachedTextDecoder = new TextDecoder('utf-8', { ignoreBOM: true, fatal: true });\ncachedTextDecoder.decode();\nconst MAX_SAFARI_DECODE_BYTES = 2146435072;\nlet numBytesDecoded = 0;\nfunction decodeText(ptr, len) {\n    numBytesDecoded += len;\n    if (numBytesDecoded >= MAX_SAFARI_DECODE_BYTES) {\n        cachedTextDecoder = new TextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n        cachedTextDecoder.decode();\n        numBytesDecoded = len;\n    }\n    return cachedTextDecoder.decode(getUint8ArrayMemory0().subarray(ptr, ptr + len));\n}\n\nconst cachedTextEncoder = new TextEncoder();\n\nif (!('encodeInto' in cachedTextEncoder)) {\n    cachedTextEncoder.encodeInto = function (arg, view) {\n        const buf = cachedTextEncoder.encode(arg);\n        view.set(buf);\n        return {\n            read: arg.length,\n            written: buf.length\n        };\n    }\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nfunction wasm_bindgen__convert__closures_____invoke__hdb66b1aeeed8926d(arg0, arg1, arg2) {\n    wasm.wasm_bindgen__convert__closures_____invoke__hdb66b1aeeed8926d(arg0, arg1, arg2);\n}\n\nfunction wasm_bindgen__convert__closures_____invoke__h3f9c308616cbc354(arg0, arg1, arg2, arg3) {\n    wasm.wasm_bindgen__convert__closures_____invoke__h3f9c308616cbc354(arg0, arg1, arg2, arg3);\n}\n\nconst __wbindgen_enum_RequestMode = [\"same-origin\", \"no-cors\", \"cors\", \"navigate\"];\n\nconst PdfEngineFinalization = (typeof FinalizationRegistry === 'undefined')\n    ? { register: () => {}, unregister: () => {} }\n    : new FinalizationRegistry(ptr => wasm.__wbg_pdfengine_free(ptr >>> 0, 1));\n\nexport class PdfEngine {\n    static __wrap(ptr) {\n        ptr = ptr >>> 0;\n        const obj = Object.create(PdfEngine.prototype);\n        obj.__wbg_ptr = ptr;\n        PdfEngineFinalization.register(obj, obj.__wbg_ptr, obj);\n        return obj;\n    }\n    __destroy_into_raw() {\n        const ptr = this.__wbg_ptr;\n        this.__wbg_ptr = 0;\n        PdfEngineFinalization.unregister(this);\n        return ptr;\n    }\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_pdfengine_free(ptr, 0);\n    }\n    /**\n     * Fetch PDF from URL and return a PdfEngine instance\n     * @param {string} url\n     * @returns {Promise<PdfEngine>}\n     */\n    static load_from_url(url) {\n        const ptr0 = passStringToWasm0(url, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.pdfengine_load_from_url(ptr0, len0);\n        return ret;\n    }\n    /**\n     * Get the raw PDF bytes for download\n     * @returns {Uint8Array}\n     */\n    get_file_bytes() {\n        const ret = wasm.pdfengine_get_file_bytes(this.__wbg_ptr);\n        var v1 = getArrayU8FromWasm0(ret[0], ret[1]).slice();\n        wasm.__wbindgen_free(ret[0], ret[1] * 1, 1);\n        return v1;\n    }\n    /**\n     * Get total page count (placeholder)\n     * @returns {number}\n     */\n    get_page_count() {\n        const ret = wasm.pdfengine_get_page_count(this.__wbg_ptr);\n        return ret >>> 0;\n    }\n    /**\n     * Render a page to canvas (stub - actual rendering requires PDFium or similar)\n     * @param {number} _page_num\n     * @param {string} _canvas_id\n     */\n    render_page_to_canvas(_page_num, _canvas_id) {\n        const ptr0 = passStringToWasm0(_canvas_id, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.pdfengine_render_page_to_canvas(this.__wbg_ptr, _page_num, ptr0, len0);\n        if (ret[1]) {\n            throw takeFromExternrefTable0(ret[0]);\n        }\n    }\n}\nif (Symbol.dispose) PdfEngine.prototype[Symbol.dispose] = PdfEngine.prototype.free;\n\nconst EXPECTED_RESPONSE_TYPES = new Set(['basic', 'cors', 'default']);\n\nasync function __wbg_load(module, imports) {\n    if (typeof Response === 'function' && module instanceof Response) {\n        if (typeof WebAssembly.instantiateStreaming === 'function') {\n            try {\n                return await WebAssembly.instantiateStreaming(module, imports);\n            } catch (e) {\n                const validResponse = module.ok && EXPECTED_RESPONSE_TYPES.has(module.type);\n\n                if (validResponse && module.headers.get('Content-Type') !== 'application/wasm') {\n                    console.warn(\"`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\\n\", e);\n\n                } else {\n                    throw e;\n                }\n            }\n        }\n\n        const bytes = await module.arrayBuffer();\n        return await WebAssembly.instantiate(bytes, imports);\n    } else {\n        const instance = await WebAssembly.instantiate(module, imports);\n\n        if (instance instanceof WebAssembly.Instance) {\n            return { instance, module };\n        } else {\n            return instance;\n        }\n    }\n}\n\nfunction __wbg_get_imports() {\n    const imports = {};\n    imports.wbg = {};\n    imports.wbg.__wbg___wbindgen_is_function_8d400b8b1af978cd = function(arg0) {\n        const ret = typeof(arg0) === 'function';\n        return ret;\n    };\n    imports.wbg.__wbg___wbindgen_is_undefined_f6b95eab589e0269 = function(arg0) {\n        const ret = arg0 === undefined;\n        return ret;\n    };\n    imports.wbg.__wbg___wbindgen_throw_dd24417ed36fc46e = function(arg0, arg1) {\n        throw new Error(getStringFromWasm0(arg0, arg1));\n    };\n    imports.wbg.__wbg__wbg_cb_unref_87dfb5aaa0cbcea7 = function(arg0) {\n        arg0._wbg_cb_unref();\n    };\n    imports.wbg.__wbg_arrayBuffer_c04af4fce566092d = function() { return handleError(function (arg0) {\n        const ret = arg0.arrayBuffer();\n        return ret;\n    }, arguments) };\n    imports.wbg.__wbg_call_3020136f7a2d6e44 = function() { return handleError(function (arg0, arg1, arg2) {\n        const ret = arg0.call(arg1, arg2);\n        return ret;\n    }, arguments) };\n    imports.wbg.__wbg_call_abb4ff46ce38be40 = function() { return handleError(function (arg0, arg1) {\n        const ret = arg0.call(arg1);\n        return ret;\n    }, arguments) };\n    imports.wbg.__wbg_fetch_8119fbf8d0e4f4d1 = function(arg0, arg1) {\n        const ret = arg0.fetch(arg1);\n        return ret;\n    };\n    imports.wbg.__wbg_instanceof_Response_cd74d1c2ac92cb0b = function(arg0) {\n        let result;\n        try {\n            result = arg0 instanceof Response;\n        } catch (_) {\n            result = false;\n        }\n        const ret = result;\n        return ret;\n    };\n    imports.wbg.__wbg_instanceof_Window_b5cf7783caa68180 = function(arg0) {\n        let result;\n        try {\n            result = arg0 instanceof Window;\n        } catch (_) {\n            result = false;\n        }\n        const ret = result;\n        return ret;\n    };\n    imports.wbg.__wbg_length_22ac23eaec9d8053 = function(arg0) {\n        const ret = arg0.length;\n        return ret;\n    };\n    imports.wbg.__wbg_new_1ba21ce319a06297 = function() {\n        const ret = new Object();\n        return ret;\n    };\n    imports.wbg.__wbg_new_6421f6084cc5bc5a = function(arg0) {\n        const ret = new Uint8Array(arg0);\n        return ret;\n    };\n    imports.wbg.__wbg_new_ff12d2b041fb48f1 = function(arg0, arg1) {\n        try {\n            var state0 = {a: arg0, b: arg1};\n            var cb0 = (arg0, arg1) => {\n                const a = state0.a;\n                state0.a = 0;\n                try {\n                    return wasm_bindgen__convert__closures_____invoke__h3f9c308616cbc354(a, state0.b, arg0, arg1);\n                } finally {\n                    state0.a = a;\n                }\n            };\n            const ret = new Promise(cb0);\n            return ret;\n        } finally {\n            state0.a = state0.b = 0;\n        }\n    };\n    imports.wbg.__wbg_new_no_args_cb138f77cf6151ee = function(arg0, arg1) {\n        const ret = new Function(getStringFromWasm0(arg0, arg1));\n        return ret;\n    };\n    imports.wbg.__wbg_new_with_str_and_init_c5748f76f5108934 = function() { return handleError(function (arg0, arg1, arg2) {\n        const ret = new Request(getStringFromWasm0(arg0, arg1), arg2);\n        return ret;\n    }, arguments) };\n    imports.wbg.__wbg_pdfengine_new = function(arg0) {\n        const ret = PdfEngine.__wrap(arg0);\n        return ret;\n    };\n    imports.wbg.__wbg_prototypesetcall_dfe9b766cdc1f1fd = function(arg0, arg1, arg2) {\n        Uint8Array.prototype.set.call(getArrayU8FromWasm0(arg0, arg1), arg2);\n    };\n    imports.wbg.__wbg_queueMicrotask_9b549dfce8865860 = function(arg0) {\n        const ret = arg0.queueMicrotask;\n        return ret;\n    };\n    imports.wbg.__wbg_queueMicrotask_fca69f5bfad613a5 = function(arg0) {\n        queueMicrotask(arg0);\n    };\n    imports.wbg.__wbg_resolve_fd5bfbaa4ce36e1e = function(arg0) {\n        const ret = Promise.resolve(arg0);\n        return ret;\n    };\n    imports.wbg.__wbg_set_method_76c69e41b3570627 = function(arg0, arg1, arg2) {\n        arg0.method = getStringFromWasm0(arg1, arg2);\n    };\n    imports.wbg.__wbg_set_mode_611016a6818fc690 = function(arg0, arg1) {\n        arg0.mode = __wbindgen_enum_RequestMode[arg1];\n    };\n    imports.wbg.__wbg_static_accessor_GLOBAL_769e6b65d6557335 = function() {\n        const ret = typeof global === 'undefined' ? null : global;\n        return isLikeNone(ret) ? 0 : addToExternrefTable0(ret);\n    };\n    imports.wbg.__wbg_static_accessor_GLOBAL_THIS_60cf02db4de8e1c1 = function() {\n        const ret = typeof globalThis === 'undefined' ? null : globalThis;\n        return isLikeNone(ret) ? 0 : addToExternrefTable0(ret);\n    };\n    imports.wbg.__wbg_static_accessor_SELF_08f5a74c69739274 = function() {\n        const ret = typeof self === 'undefined' ? null : self;\n        return isLikeNone(ret) ? 0 : addToExternrefTable0(ret);\n    };\n    imports.wbg.__wbg_static_accessor_WINDOW_a8924b26aa92d024 = function() {\n        const ret = typeof window === 'undefined' ? null : window;\n        return isLikeNone(ret) ? 0 : addToExternrefTable0(ret);\n    };\n    imports.wbg.__wbg_then_429f7caf1026411d = function(arg0, arg1, arg2) {\n        const ret = arg0.then(arg1, arg2);\n        return ret;\n    };\n    imports.wbg.__wbg_then_4f95312d68691235 = function(arg0, arg1) {\n        const ret = arg0.then(arg1);\n        return ret;\n    };\n    imports.wbg.__wbindgen_cast_2241b6af4c4b2941 = function(arg0, arg1) {\n        // Cast intrinsic for `Ref(String) -> Externref`.\n        const ret = getStringFromWasm0(arg0, arg1);\n        return ret;\n    };\n    imports.wbg.__wbindgen_cast_c94007a4cf2d05f5 = function(arg0, arg1) {\n        // Cast intrinsic for `Closure(Closure { dtor_idx: 5, function: Function { arguments: [Externref], shim_idx: 6, ret: Unit, inner_ret: Some(Unit) }, mutable: true }) -> Externref`.\n        const ret = makeMutClosure(arg0, arg1, wasm.wasm_bindgen__closure__destroy__h9294e17568f504ba, wasm_bindgen__convert__closures_____invoke__hdb66b1aeeed8926d);\n        return ret;\n    };\n    imports.wbg.__wbindgen_init_externref_table = function() {\n        const table = wasm.__wbindgen_externrefs;\n        const offset = table.grow(4);\n        table.set(0, undefined);\n        table.set(offset + 0, undefined);\n        table.set(offset + 1, null);\n        table.set(offset + 2, true);\n        table.set(offset + 3, false);\n    };\n\n    return imports;\n}\n\nfunction __wbg_finalize_init(instance, module) {\n    wasm = instance.exports;\n    __wbg_init.__wbindgen_wasm_module = module;\n    cachedUint8ArrayMemory0 = null;\n\n\n    wasm.__wbindgen_start();\n    return wasm;\n}\n\nfunction initSync(module) {\n    if (wasm !== undefined) return wasm;\n\n\n    if (typeof module !== 'undefined') {\n        if (Object.getPrototypeOf(module) === Object.prototype) {\n            ({module} = module)\n        } else {\n            console.warn('using deprecated parameters for `initSync()`; pass a single object instead')\n        }\n    }\n\n    const imports = __wbg_get_imports();\n    if (!(module instanceof WebAssembly.Module)) {\n        module = new WebAssembly.Module(module);\n    }\n    const instance = new WebAssembly.Instance(module, imports);\n    return __wbg_finalize_init(instance, module);\n}\n\nasync function __wbg_init(module_or_path) {\n    if (wasm !== undefined) return wasm;\n\n\n    if (typeof module_or_path !== 'undefined') {\n        if (Object.getPrototypeOf(module_or_path) === Object.prototype) {\n            ({module_or_path} = module_or_path)\n        } else {\n            console.warn('using deprecated parameters for the initialization function; pass a single object instead')\n        }\n    }\n\n    if (typeof module_or_path === 'undefined') {\n        module_or_path = new URL('rusty_pdf_bg.wasm', import.meta.url);\n    }\n    const imports = __wbg_get_imports();\n\n    if (typeof module_or_path === 'string' || (typeof Request === 'function' && module_or_path instanceof Request) || (typeof URL === 'function' && module_or_path instanceof URL)) {\n        module_or_path = fetch(module_or_path);\n    }\n\n    const { instance, module } = await __wbg_load(await module_or_path, imports);\n\n    return __wbg_finalize_init(instance, module);\n}\n\nexport { initSync };\nexport default __wbg_init;\n","import { useEffect, useRef, useState } from 'react';\nimport './styles.css';\nimport init, { PdfEngine } from './wasm/rusty_pdf.js';\n\nconst RustyPdf = ({ url, theme = 'system' }) => {\n  const [engine, setEngine] = useState(null);\n  const [page, setPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const canvasRef = useRef(null);\n\n  useEffect(() => {\n    const start = async () => {\n      // Import the WASM binary or handle initialization\n      await init();\n      try {\n        const pdf = await PdfEngine.load_from_url(url);\n        setEngine(pdf);\n        setTotalPages(pdf.get_page_count());\n        setLoading(false);\n      } catch (err) {\n        console.error(\"Failed to load PDF\", err);\n      }\n    };\n    start();\n  }, [url]);\n\n  useEffect(() => {\n    if (engine && !loading) {\n      engine.render_page_to_canvas(page, 'pdf-canvas');\n    }\n  }, [engine, page, loading]);\n\n  const handleDownload = () => {\n    if (!engine) return;\n    const bytes = engine.get_file_bytes();\n    const blob = new Blob([bytes], { type: 'application/pdf' });\n    const link = document.createElement('a');\n    link.href = URL.createObjectURL(blob);\n    link.download = 'document.pdf';\n    link.click();\n  };\n\n  const getThemeClass = () => {\n    if (theme === 'light') return 'pdf-light';\n    if (theme === 'dark') return 'pdf-dark';\n    if (typeof window !== 'undefined' && window.matchMedia) {\n      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'pdf-dark' : 'pdf-light';\n    }\n    return 'pdf-light';\n  };\n\n  return (\n    <div className={`pdf-wrapper ${getThemeClass()}`}>\n      <div className=\"pdf-toolbar\">\n        <button onClick={() => setPage(p => Math.max(1, p - 1))} disabled={page === 1}>‹</button>\n        <span>{page} / {totalPages}</span>\n        <button onClick={() => setPage(p => Math.min(totalPages, p + 1))} disabled={page === totalPages}>›</button>\n        <span>|</span>\n        <button onClick={handleDownload}>↓</button>\n      </div>\n\n      <div className=\"canvas-container\">\n        {loading ? (\n          <div className=\"pdf-loading\">\n            <div className=\"pdf-spinner\"></div>\n            <span>Loading...</span>\n          </div>\n        ) : (\n          <canvas id=\"pdf-canvas\" ref={canvasRef} />\n        )}\n      </div>\n\n      <div className=\"pdf-footer\">\n        <a href=\"https://github.com/codeninja-404\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"pdf-credit\">\n          <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n            <path d=\"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z\"/>\n          </svg>\n          codeninja-404\n        </a>\n      </div>\n    </div>\n  );\n};\n\nexport default RustyPdf;\n"],"names":["wasm","addToExternrefTable0","obj","idx","CLOSURE_DTORS","state","getArrayU8FromWasm0","ptr","len","getUint8ArrayMemory0","getStringFromWasm0","decodeText","cachedUint8ArrayMemory0","handleError","f","args","e","isLikeNone","x","makeMutClosure","arg0","arg1","dtor","real","a","passStringToWasm0","arg","malloc","realloc","buf","cachedTextEncoder","WASM_VECTOR_LEN","mem","offset","code","view","ret","takeFromExternrefTable0","value","cachedTextDecoder","MAX_SAFARI_DECODE_BYTES","numBytesDecoded","wasm_bindgen__convert__closures_____invoke__hdb66b1aeeed8926d","arg2","wasm_bindgen__convert__closures_____invoke__h3f9c308616cbc354","arg3","__wbindgen_enum_RequestMode","PdfEngineFinalization","PdfEngine","url","ptr0","len0","v1","_page_num","_canvas_id","EXPECTED_RESPONSE_TYPES","__wbg_load","module","imports","bytes","instance","__wbg_get_imports","result","state0","cb0","table","__wbg_finalize_init","__wbg_init","module_or_path","RustyPdf","theme","engine","setEngine","useState","page","setPage","totalPages","setTotalPages","loading","setLoading","canvasRef","useRef","useEffect","init","pdf","err","handleDownload","blob","link","getThemeClass","jsxs","jsx","p"],"mappings":"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"}